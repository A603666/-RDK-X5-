# 鱼群'视'卫智能渔业水环境管理系统 - 板端依赖管理
# 地平线RDKX5开发板专用依赖配置
# 包含传感器控制、定位导航、AI检测、电机控制等板端功能

# ============================================================================
# 基础依赖（从主requirements.txt继承）
# ============================================================================

# 核心通讯
paho-mqtt>=1.6.0,<2.0.0                # MQTT客户端库

# 数值计算
numpy>=1.21.0,<2.0.0                   # 数值计算基础库
scipy>=1.9.0,<2.0.0                    # 科学计算库（路径平滑、数据插值）

# 计算机视觉
opencv-python>=4.6.0,<5.0.0            # OpenCV图像处理库

# 系统工具
pyserial>=3.5,<4.0                     # 串口通信库（GPS、IMU、传感器）

# ============================================================================
# 地平线RDKX5平台特定依赖
# ============================================================================

# 硬件控制库（需要在RDKX5平台上安装）
# Hobot.GPIO                            # GPIO控制库
# hobot_dnn                             # DNN推理库（AI检测）

# 注意：以上库需要在地平线RDKX5开发板上通过以下方式安装：
# sudo apt update
# sudo apt install python3-hobot-gpio
# sudo apt install python3-hobot-dnn

# ============================================================================
# 传感器模块依赖
# ============================================================================

# 数据处理
pandas>=1.5.0,<3.0.0                   # 数据处理（传感器数据聚合）

# ============================================================================
# 定位模块依赖
# ============================================================================

# GPS/IMU数据处理
# 无额外依赖，使用numpy和scipy进行卡尔曼滤波

# ============================================================================
# 导航避障模块依赖
# ============================================================================

# 异步编程
asyncio-mqtt>=0.11.0,<1.0.0            # 异步MQTT支持（可选）

# ============================================================================
# AI检测模块依赖
# ============================================================================

# 深度学习推理（如果不使用hobot_dnn）
# tensorflow>=2.10.0,<3.0.0            # 备用推理框架

# ============================================================================
# 电机控制模块依赖
# ============================================================================

# PWM控制
# 使用Hobot.GPIO库进行PWM控制，无需额外依赖

# ============================================================================
# 开发和调试依赖
# ============================================================================

# 日志和调试
# 使用Python标准库logging，无需额外依赖

# ============================================================================
# 安装脚本
# ============================================================================

# 板端完整安装命令：
# 
# 1. 更新系统包
# sudo apt update && sudo apt upgrade -y
# 
# 2. 安装Python依赖
# pip3 install -r board_requirements.txt
# 
# 3. 安装地平线RDKX5特定库
# sudo apt install python3-hobot-gpio python3-hobot-dnn
# 
# 4. 配置权限
# sudo usermod -a -G gpio $USER
# sudo usermod -a -G i2c $USER
# sudo usermod -a -G spi $USER
# 
# 5. 重启系统使权限生效
# sudo reboot

# ============================================================================
# 硬件连接说明
# ============================================================================

# GPIO连接：
# - 传感器模块：I2C/UART接口
# - GPS模块：USB/UART接口
# - IMU模块：I2C接口
# - 超声波传感器：GPIO数字接口
# - 电机控制：PWM接口

# 串口配置：
# - GPS: /dev/ttyUSB0, 9600波特率
# - IMU: /dev/ttyUSB1, 115200波特率
# - 传感器: I2C总线

# ============================================================================
# 性能优化配置
# ============================================================================

# CPU频率设置（可选）
# sudo cpufreq-set -g performance

# 内存优化
# 确保至少512MB可用内存用于AI推理

# 存储优化
# 建议使用高速SD卡（Class 10或更高）

# ============================================================================
# 故障排除
# ============================================================================

# 常见问题：
# 1. GPIO权限问题：确保用户在gpio组中
# 2. 串口权限问题：确保用户在dialout组中
# 3. I2C设备不可用：检查设备树配置
# 4. 内存不足：关闭不必要的系统服务

# 调试命令：
# - 检查GPIO状态：gpio readall
# - 检查I2C设备：i2cdetect -y 1
# - 检查串口设备：ls /dev/ttyUSB*
# - 检查系统资源：htop

# ============================================================================
# 模块启动顺序
# ============================================================================

# 推荐启动顺序：
# 1. 电机控制模块（基础运动控制）
# 2. 传感器模块（数据采集）
# 3. 定位模块（GPS+IMU融合）
# 4. 导航避障模块（路径规划和避障）
# 5. AI检测模块（图像识别）

# 启动延迟配置：
# - 电机控制：0秒
# - 传感器：2秒
# - 定位：3秒
# - 导航：4秒
# - AI检测：5秒
